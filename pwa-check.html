<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA æª¢æŸ¥å·¥å…·</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .check-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .check-item.success {
            background: #d1fae5;
            border-left: 4px solid #10b981;
        }
        .check-item.error {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
        }
        .check-item.warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
        }
        .icon {
            font-size: 24px;
            min-width: 30px;
        }
        .info {
            flex: 1;
        }
        .info-title {
            font-weight: 700;
            margin-bottom: 5px;
        }
        .info-detail {
            font-size: 14px;
            color: #666;
        }
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f9fafb;
            border-radius: 10px;
        }
        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1f2937;
        }
        code {
            background: #1f2937;
            color: #10b981;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” PWA ç³»çµ±æª¢æŸ¥å·¥å…·</h1>
        <p class="subtitle">8å™¸æ²¹çˆæ™ºèƒ½ç®¡ç†ç³»çµ± - å®‰è£æª¢æŸ¥</p>

        <div id="results"></div>

        <div class="section">
            <div class="section-title">ğŸ“± å¿«é€Ÿé€£çµ</div>
            <button onclick="window.open('./boiler-dashboard-simple.html', '_blank')">
                é–‹å•Ÿå„€è¡¨æ¿
            </button>
            <button onclick="window.open('./qr-mobile-multilang.html', '_blank')">
                é–‹å•Ÿ QR è¼¸å…¥é é¢
            </button>
            <button onclick="checkAll()">
                ğŸ”„ é‡æ–°æª¢æŸ¥
            </button>
        </div>

        <div class="section">
            <div class="section-title">ğŸ“š å®‰è£æ­¥é©Ÿ</div>
            <ol style="line-height: 1.8;">
                <li>ç¢ºä¿æ‰€æœ‰æª”æ¡ˆéƒ½ä¸Šå‚³åˆ°åŒä¸€å€‹ç›®éŒ„</li>
                <li>ç¢ºèªç¶²ç«™ä½¿ç”¨ <code>https://</code> (å¿…è¦)</li>
                <li>ç”¨æ‰‹æ©Ÿç€è¦½å™¨é–‹å•Ÿå„€è¡¨æ¿</li>
                <li>é»æ“Šã€Œå®‰è£ APPã€æˆ–ã€ŒåŠ å…¥ä¸»ç•«é¢ã€</li>
                <li>å®Œæˆï¼</li>
            </ol>
        </div>

        <div class="section">
            <div class="section-title">âš™ï¸ éœ€è¦çš„æª”æ¡ˆ</div>
            <ul style="line-height: 1.8;">
                <li><code>boiler-dashboard-simple.html</code> - ä¸»å„€è¡¨æ¿</li>
                <li><code>qr-mobile-multilang.html</code> - QR è¼¸å…¥é é¢</li>
                <li><code>manifest.json</code> - PWA è¨­å®šæª”</li>
                <li><code>service-worker.js</code> - é›¢ç·šåŠŸèƒ½</li>
                <li><code>icon-192.png</code> - APP å°åœ–ç¤º</li>
                <li><code>icon-512.png</code> - APP å¤§åœ–ç¤º</li>
            </ul>
        </div>
    </div>

    <script>
        async function checkFile(filename) {
            try {
                const response = await fetch(filename, { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }

        async function checkAll() {
            const results = document.getElementById('results');
            results.innerHTML = '<p style="text-align:center;color:#666;">æª¢æŸ¥ä¸­...</p>';

            const checks = [
                { file: 'manifest.json', name: 'PWA è¨­å®šæª”' },
                { file: 'service-worker.js', name: 'Service Worker' },
                { file: 'icon-192.png', name: 'APP åœ–ç¤º 192x192' },
                { file: 'icon-512.png', name: 'APP åœ–ç¤º 512x512' },
                { file: 'boiler-dashboard-simple.html', name: 'å„€è¡¨æ¿é é¢' },
                { file: 'qr-mobile-multilang.html', name: 'QR è¼¸å…¥é é¢' }
            ];

            const resultsHTML = [];
            let allSuccess = true;

            for (const check of checks) {
                const exists = await checkFile(check.file);
                if (exists) {
                    resultsHTML.push(`
                        <div class="check-item success">
                            <div class="icon">âœ…</div>
                            <div class="info">
                                <div class="info-title">${check.name}</div>
                                <div class="info-detail">${check.file} - æª”æ¡ˆå­˜åœ¨</div>
                            </div>
                        </div>
                    `);
                } else {
                    allSuccess = false;
                    resultsHTML.push(`
                        <div class="check-item error">
                            <div class="icon">âŒ</div>
                            <div class="info">
                                <div class="info-title">${check.name}</div>
                                <div class="info-detail">${check.file} - æ‰¾ä¸åˆ°æª”æ¡ˆ</div>
                            </div>
                        </div>
                    `);
                }
            }

            // æª¢æŸ¥ HTTPS
            const isHttps = window.location.protocol === 'https:' || window.location.hostname === 'localhost';
            if (isHttps) {
                resultsHTML.push(`
                    <div class="check-item success">
                        <div class="icon">ğŸ”’</div>
                        <div class="info">
                            <div class="info-title">å®‰å…¨é€£ç·š (HTTPS)</div>
                            <div class="info-detail">PWA å¯æ­£å¸¸é‹ä½œ</div>
                        </div>
                    </div>
                `);
            } else {
                allSuccess = false;
                resultsHTML.push(`
                    <div class="check-item error">
                        <div class="icon">âš ï¸</div>
                        <div class="info">
                            <div class="info-title">æœªä½¿ç”¨ HTTPS</div>
                            <div class="info-detail">PWA éœ€è¦ HTTPS æ‰èƒ½é‹ä½œ (localhost é™¤å¤–)</div>
                        </div>
                    </div>
                `);
            }

            // æª¢æŸ¥ Service Worker æ”¯æ´
            if ('serviceWorker' in navigator) {
                resultsHTML.push(`
                    <div class="check-item success">
                        <div class="icon">âš™ï¸</div>
                        <div class="info">
                            <div class="info-title">ç€è¦½å™¨æ”¯æ´</div>
                            <div class="info-detail">æ‚¨çš„ç€è¦½å™¨æ”¯æ´ Service Worker</div>
                        </div>
                    </div>
                `);
            } else {
                resultsHTML.push(`
                    <div class="check-item warning">
                        <div class="icon">âš ï¸</div>
                        <div class="info">
                            <div class="info-title">ç€è¦½å™¨ä¸æ”¯æ´</div>
                            <div class="info-detail">è«‹ä½¿ç”¨ Chromeã€Edge æˆ– Safari</div>
                        </div>
                    </div>
                `);
            }

            // ç¸½çµ
            if (allSuccess) {
                resultsHTML.unshift(`
                    <div class="check-item success" style="font-size: 18px;">
                        <div class="icon">ğŸ‰</div>
                        <div class="info">
                            <div class="info-title">æ‰€æœ‰æª¢æŸ¥é€šéï¼</div>
                            <div class="info-detail">æ‚¨çš„ PWA å·²æº–å‚™å°±ç·’ï¼Œå¯ä»¥é–‹å§‹ä½¿ç”¨äº†</div>
                        </div>
                    </div>
                `);
            } else {
                resultsHTML.unshift(`
                    <div class="check-item error" style="font-size: 18px;">
                        <div class="icon">âŒ</div>
                        <div class="info">
                            <div class="info-title">ç™¼ç¾å•é¡Œ</div>
                            <div class="info-detail">è«‹ä¿®æ­£ä¸Šè¿°å•é¡Œå¾Œå†è©¦</div>
                        </div>
                    </div>
                `);
            }

            results.innerHTML = resultsHTML.join('');
        }

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•æª¢æŸ¥
        checkAll();
    </script>
</body>
</html>
