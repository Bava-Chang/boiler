<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8Âô∏Ê≤πÁàêÊô∫ËÉΩÁÆ°ÁêÜÁ≥ªÁµ±</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="8Âô∏Ê≤πÁàêÊô∫ËÉΩÁÆ°ÁêÜÁ≥ªÁµ± - Â§öË™ûË®ÄÊîØÊè¥ (‰∏≠Êñá/Ë∂äÂçóÊñá/Ê≥∞Êñá)">
    <meta name="theme-color" content="#0a4d68">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ê≤πÁàêÁÆ°ÁêÜ">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Noto+Sans+Thai:wght@300;400;500;700;900&family=Noto+Sans:wght@300;400;500;700;900&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0a4d68;
            --primary-light: #088395;
            --accent: #05bfdb;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --dark: #0c1821;
            --dark-secondary: #1a2332;
            --text-primary: #e8eaed;
            --text-secondary: #9ca3af;
            --border: #2d3748;
        }

        body {
            font-family: 'Noto Sans TC', 'Noto Sans Thai', 'Noto Sans', sans-serif;
            background: linear-gradient(135deg, #0c1821 0%, #1a2332 100%);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Login Screen */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0a4d68, #088395);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .login-card {
            background: white;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }

        .login-logo {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .login-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #1f2937;
        }

        .login-subtitle {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 30px;
        }

        .login-input {
            width: 100%;
            padding: 16px;
            background: #f8f9fa;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 18px;
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .login-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .login-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--accent), var(--primary-light));
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
        }

        .login-error {
            color: var(--danger);
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .login-error.show {
            display: block;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            padding: 25px 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 4px;
        }

        .header-user {
            font-size: 14px;
            opacity: 0.9;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(16, 185, 129, 0.2);
            padding: 10px 20px;
            border-radius: 24px;
            border: 2px solid var(--success);
            font-weight: 700;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .logout-btn {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: 600;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--dark-secondary);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(5,191,219,0.3);
        }

        .stat-card.highlight {
            border-color: var(--accent);
            box-shadow: 0 4px 20px rgba(5,191,219,0.4);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(5,191,219,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 900;
            font-family: 'Orbitron', sans-serif;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .stat-unit {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .stat-footer {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .trend-up {
            color: var(--success);
            font-weight: 600;
        }

        .trend-down {
            color: var(--danger);
            font-weight: 600;
        }

        /* Chart Section */
        .chart-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: var(--dark-secondary);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
        }

        .chart-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .chart-container {
            height: 300px;
        }

        /* Records Section */
        .records-section {
            background: var(--dark-secondary);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 16px rgba(0,0,0,0.3);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: var(--dark);
            padding: 15px;
            text-align: left;
            font-size: 13px;
            font-weight: 700;
            color: var(--text-secondary);
        }

        td {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        tr:hover {
            background: rgba(5,191,219,0.05);
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(16,185,129,0.2);
            color: var(--success);
        }

        @media (max-width: 968px) {
            .chart-section {
                grid-template-columns: 1fr;
            }
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">üî•</div>
            <h2 class="login-title" id="loginTitle">Ê≤πÁàêÁÆ°ÁêÜÁ≥ªÁµ±</h2>
            <p class="login-subtitle" id="loginSubtitle">Ë´ãËº∏ÂÖ•Â∑•ËôüÁôªÂÖ•</p>
            <form id="loginForm">
                <input 
                    type="text" 
                    class="login-input" 
                    id="employeeId"
                    placeholder="Ëº∏ÂÖ•Â∑•Ëôü"
                    required
                />
                <button type="submit" class="login-btn" id="loginBtn">ÁôªÂÖ•</button>
                <div class="login-error" id="loginError">Â∑•Ëôü‰∏çÂ≠òÂú®</div>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="mainDashboard" class="container hidden">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1 id="systemTitle">8Âô∏Ê≤πÁàêÊô∫ËÉΩÁÆ°ÁêÜÁ≥ªÁµ±</h1>
                    <div class="header-user" id="welcomeMessage">Ê≠°Ëøé, ‰ΩøÁî®ËÄÖ</div>
                </div>
                <div class="header-right">
                    <div class="status-badge">
                        <div class="status-dot"></div>
                        <span id="statusText">ÈÅãË°åÊ≠£Â∏∏</span>
                    </div>
                    <button class="logout-btn" onclick="logout()" id="logoutBtn">ÁôªÂá∫</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Stats -->
        <div class="dashboard-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-label" id="label1">Áï∂ÂâçÊ≤πÈáè</span>
                    <div class="stat-icon">üíß</div>
                </div>
                <div class="stat-value">4523</div>
                <div class="stat-unit" id="unit1">ÂÖ¨Âçá (L)</div>
                <div class="stat-footer">
                    <span class="trend-down">‚Üì 285L</span>
                    <span id="footer1">‰ªäÊó•Ê∂àËÄó</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-label" id="label2">‰ªäÊó•Áî®Ê∞¥</span>
                    <div class="stat-icon">üí¶</div>
                </div>
                <div class="stat-value">8550</div>
                <div class="stat-unit" id="unit2">ÂÖ¨Âçá (L)</div>
                <div class="stat-footer">
                    <span id="footer2">‰ªäÊó•Á¥ØË®à</span>
                </div>
            </div>

            <div class="stat-card highlight">
                <div class="stat-header">
                    <span class="stat-label" id="label3">Ê∞¥ÁÖ§ÊØî</span>
                    <div class="stat-icon">üìä</div>
                </div>
                <div class="stat-value">30.0</div>
                <div class="stat-unit" id="unit3">LÊ∞¥/LÊ≤π</div>
                <div class="stat-footer">
                    <span class="trend-up">‚úì <span id="footer3">ÊúÄ‰Ω≥</span></span>
                    <span>(28-32)</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-label" id="label4">ÈÅãË°åÊôÇÈñì</span>
                    <div class="stat-icon">‚è±Ô∏è</div>
                </div>
                <div class="stat-value">8.5</div>
                <div class="stat-unit" id="unit4">Â∞èÊôÇ (hr)</div>
                <div class="stat-footer">
                    <span id="footer4">‰ªäÊó•Á¥ØË®à</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-label" id="label5">ÁáÉÁáíÊïàÁéá</span>
                    <div class="stat-icon">üî•</div>
                </div>
                <div class="stat-value">92.5</div>
                <div class="stat-unit">%</div>
                <div class="stat-footer">
                    <span class="trend-up">‚Üë 1.2%</span>
                    <span id="footer5">vs Êò®Êó•</span>
                </div>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="chart-section">
            <div class="chart-card">
                <h3 class="chart-title" id="chartTitle">Ê≤πËÄó & Ê∞¥ËÄóË∂®Âã¢</h3>
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h3 class="chart-title" id="paramTitle">Âç≥ÊôÇÂèÉÊï∏</h3>
                <div style="display: flex; flex-direction: column; gap: 20px; margin-top: 20px;">
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 14px; color: var(--text-secondary);" id="temp">ÁàêÊ∫´</span>
                            <span style="font-size: 18px; font-weight: 700; color: #f59e0b;">165¬∞C</span>
                        </div>
                        <div style="height: 8px; background: var(--dark); border-radius: 4px;">
                            <div style="height: 100%; width: 82.5%; background: linear-gradient(90deg, #f59e0b, #ef4444); border-radius: 4px;"></div>
                        </div>
                    </div>

                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 14px; color: var(--text-secondary);" id="pressure">Â£ìÂäõ</span>
                            <span style="font-size: 18px; font-weight: 700; color: #10b981;">7.2 bar</span>
                        </div>
                        <div style="height: 8px; background: var(--dark); border-radius: 4px;">
                            <div style="height: 100%; width: 72%; background: linear-gradient(90deg, #10b981, #05bfdb); border-radius: 4px;"></div>
                        </div>
                    </div>

                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 14px; color: var(--text-secondary);" id="oxygen">Ê∞ßÂê´Èáè</span>
                            <span style="font-size: 18px; font-weight: 700; color: #05bfdb;">3.8%</span>
                        </div>
                        <div style="height: 8px; background: var(--dark); border-radius: 4px;">
                            <div style="height: 100%; width: 38%; background: linear-gradient(90deg, #05bfdb, #088395); border-radius: 4px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Records Section -->
        <div class="records-section">
            <h2 class="section-title" id="recordsTitle">üìã ÊúÄËøëÈÅãË°åË®òÈåÑ</h2>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th id="th1">ÊôÇÈñì</th>
                            <th id="th2">Êìç‰ΩúÂì°</th>
                            <th id="th3">Ê≤πÈáèËµ∑(L)</th>
                            <th id="th4">Ê≤πÈáèË®ñ(L)</th>
                            <th id="th5">Áî®Ê∞¥(L)</th>
                            <th id="th6">Ê∞¥ÁÖ§ÊØî</th>
                            <th id="th7">ÁãÄÊÖã</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2024-12-03 08:00</td>
                            <td>Âºµ‰∏â</td>
                            <td>4800</td>
                            <td>4523</td>
                            <td>8550</td>
                            <td><strong>30.86</strong></td>
                            <td><span class="badge badge-success">Ê≠£Â∏∏</span></td>
                        </tr>
                        <tr>
                            <td>2024-12-02 08:00</td>
                            <td>Nguy·ªÖn VƒÉn A</td>
                            <td>5100</td>
                            <td>4800</td>
                            <td>9000</td>
                            <td><strong>30.0</strong></td>
                            <td><span class="badge badge-success">Ê≠£Â∏∏</span></td>
                        </tr>
                        <tr>
                            <td>2024-12-01 08:00</td>
                            <td>‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏°‡∏≤‡∏•‡∏±‡∏¢</td>
                            <td>5400</td>
                            <td>5100</td>
                            <td>8700</td>
                            <td><strong>29.0</strong></td>
                            <td><span class="badge badge-success">Ê≠£Â∏∏</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Google Apps Script URL
        const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL';

        // Âì°Â∑•Ë≥áÊñôÂ∫´
        const EMPLOYEE_DATABASE = {
            'A001': { name: 'Nguy·ªÖn VƒÉn A', nationality: 'vi', language: 'vi' },
            'A002': { name: 'Tr·∫ßn Th·ªã B', nationality: 'vi', language: 'vi' },
            'A003': { name: 'L√™ VƒÉn C', nationality: 'vi', language: 'vi' },
            'B001': { name: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏°‡∏≤‡∏•‡∏±‡∏¢', nationality: 'th', language: 'th' },
            'B002': { name: '‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏ß‡∏á‡∏®‡πå‡πÉ‡∏´‡∏ç‡πà', nationality: 'th', language: 'th' },
            'B003': { name: '‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏ó‡∏ò ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå', nationality: 'th', language: 'th' },
            'C001': { name: 'Âºµ‰∏â', nationality: 'tw', language: 'zh' },
            'C002': { name: 'ÊùéÂõõ', nationality: 'tw', language: 'zh' },
            'C003': { name: 'Áéã‰∫î', nationality: 'tw', language: 'zh' },
            'TEST': { name: 'Test User', nationality: 'tw', language: 'zh' }
        };

        // ÁøªË≠Ø
        const TRANSLATIONS = {
            zh: {
                loginTitle: 'Ê≤πÁàêÁÆ°ÁêÜÁ≥ªÁµ±',
                loginSubtitle: 'Ë´ãËº∏ÂÖ•Â∑•ËôüÁôªÂÖ•',
                loginPlaceholder: 'Ëº∏ÂÖ•Â∑•Ëôü',
                loginBtn: 'ÁôªÂÖ•',
                loginError: 'Â∑•Ëôü‰∏çÂ≠òÂú®',
                systemTitle: '8Âô∏Ê≤πÁàêÊô∫ËÉΩÁÆ°ÁêÜÁ≥ªÁµ±',
                welcome: 'Ê≠°Ëøé',
                statusText: 'ÈÅãË°åÊ≠£Â∏∏',
                logoutBtn: 'ÁôªÂá∫',
                label1: 'Áï∂ÂâçÊ≤πÈáè',
                label2: '‰ªäÊó•Áî®Ê∞¥',
                label3: 'Ê∞¥ÁÖ§ÊØî',
                label4: 'ÈÅãË°åÊôÇÈñì',
                label5: 'ÁáÉÁáíÊïàÁéá',
                unit1: 'ÂÖ¨Âçá (L)',
                unit2: 'ÂÖ¨Âçá (L)',
                unit3: 'LÊ∞¥/LÊ≤π',
                unit4: 'Â∞èÊôÇ (hr)',
                footer1: '‰ªäÊó•Ê∂àËÄó',
                footer2: '‰ªäÊó•Á¥ØË®à',
                footer3: 'ÊúÄ‰Ω≥',
                footer4: '‰ªäÊó•Á¥ØË®à',
                footer5: 'vs Êò®Êó•',
                chartTitle: 'Ê≤πËÄó & Ê∞¥ËÄóË∂®Âã¢',
                paramTitle: 'Âç≥ÊôÇÂèÉÊï∏',
                temp: 'ÁàêÊ∫´',
                pressure: 'Â£ìÂäõ',
                oxygen: 'Ê∞ßÂê´Èáè',
                recordsTitle: 'üìã ÊúÄËøëÈÅãË°åË®òÈåÑ',
                th1: 'ÊôÇÈñì',
                th2: 'Êìç‰ΩúÂì°',
                th3: 'Ê≤πÈáèËµ∑(L)',
                th4: 'Ê≤πÈáèË®ñ(L)',
                th5: 'Áî®Ê∞¥(L)',
                th6: 'Ê∞¥ÁÖ§ÊØî',
                th7: 'ÁãÄÊÖã'
            },
            vi: {
                loginTitle: 'H·ªá th·ªëng qu·∫£n l√Ω l√≤ d·∫ßu',
                loginSubtitle: 'Vui l√≤ng nh·∫≠p m√£ nh√¢n vi√™n',
                loginPlaceholder: 'Nh·∫≠p m√£',
                loginBtn: 'ƒêƒÉng nh·∫≠p',
                loginError: 'M√£ kh√¥ng t·ªìn t·∫°i',
                systemTitle: 'H·ªá th·ªëng qu·∫£n l√Ω l√≤ d·∫ßu 8 t·∫•n',
                welcome: 'Ch√†o m·ª´ng',
                statusText: 'Ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng',
                logoutBtn: 'ƒêƒÉng xu·∫•t',
                label1: 'L∆∞·ª£ng d·∫ßu hi·ªán t·∫°i',
                label2: 'L∆∞·ª£ng n∆∞·ªõc h√¥m nay',
                label3: 'T·ª∑ l·ªá n∆∞·ªõc/d·∫ßu',
                label4: 'Th·ªùi gian ho·∫°t ƒë·ªông',
                label5: 'Hi·ªáu su·∫•t ƒë·ªët',
                unit1: 'l√≠t (L)',
                unit2: 'l√≠t (L)',
                unit3: 'L n∆∞·ªõc/L d·∫ßu',
                unit4: 'gi·ªù (hr)',
                footer1: 'Ti√™u th·ª• h√¥m nay',
                footer2: 'T√≠ch l≈©y h√¥m nay',
                footer3: 'T·ªëi ∆∞u',
                footer4: 'T√≠ch l≈©y h√¥m nay',
                footer5: 'so v·ªõi h√¥m qua',
                chartTitle: 'Xu h∆∞·ªõng ti√™u th·ª• d·∫ßu & n∆∞·ªõc',
                paramTitle: 'Th√¥ng s·ªë th·ªùi gian th·ª±c',
                temp: 'Nhi·ªát ƒë·ªô l√≤',
                pressure: '√Åp su·∫•t',
                oxygen: 'H√†m l∆∞·ª£ng oxy',
                recordsTitle: 'üìã H·ªì s∆° v·∫≠n h√†nh g·∫ßn ƒë√¢y',
                th1: 'Th·ªùi gian',
                th2: 'Ng∆∞·ªùi v·∫≠n h√†nh',
                th3: 'D·∫ßu ƒë·∫ßu(L)',
                th4: 'D·∫ßu cu·ªëi(L)',
                th5: 'N∆∞·ªõc(L)',
                th6: 'T·ª∑ l·ªá n∆∞·ªõc/d·∫ßu',
                th7: 'Tr·∫°ng th√°i'
            },
            th: {
                loginTitle: '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô',
                loginSubtitle: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô',
                loginPlaceholder: '‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™',
                loginBtn: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö',
                loginError: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ',
                systemTitle: '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô 8 ‡∏ï‡∏±‡∏ô',
                welcome: '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö',
                statusText: '‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥',
                logoutBtn: '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö',
                label1: '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô',
                label2: '‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
                label3: '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ô‡πâ‡∏≥/‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô',
                label4: '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô',
                label5: '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏≤‡πÑ‡∏´‡∏°‡πâ',
                unit1: '‡∏•‡∏¥‡∏ï‡∏£ (L)',
                unit2: '‡∏•‡∏¥‡∏ï‡∏£ (L)',
                unit3: 'L ‡∏ô‡πâ‡∏≥/L ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô',
                unit4: '‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (hr)',
                footer1: '‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
                footer2: '‡∏™‡∏∞‡∏™‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
                footer3: '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°',
                footer4: '‡∏™‡∏∞‡∏™‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
                footer5: '‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô',
                chartTitle: '‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥',
                paramTitle: '‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå',
                temp: '‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏ï‡∏≤',
                pressure: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô',
                oxygen: '‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô',
                recordsTitle: 'üìã ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î',
                th1: '‡πÄ‡∏ß‡∏•‡∏≤',
                th2: '‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô',
                th3: '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô(L)',
                th4: '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î(L)',
                th5: '‡∏ô‡πâ‡∏≥(L)',
                th6: '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ô‡πâ‡∏≥/‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô',
                th7: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞'
            }
        };

        let currentUser = null;
        let currentLanguage = 'zh';
        let chartInstance = null;

        // ÁøªË≠ØÂáΩÊï∏
        function t(key) {
            return TRANSLATIONS[currentLanguage][key] || key;
        }

        // Êõ¥Êñ∞‰ªãÈù¢ÊñáÂ≠ó
        function updateLanguage() {
            document.getElementById('loginTitle').textContent = t('loginTitle');
            document.getElementById('loginSubtitle').textContent = t('loginSubtitle');
            document.getElementById('employeeId').placeholder = t('loginPlaceholder');
            document.getElementById('loginBtn').textContent = t('loginBtn');
            document.getElementById('loginError').textContent = t('loginError');
            document.getElementById('systemTitle').textContent = t('systemTitle');
            document.getElementById('statusText').textContent = t('statusText');
            document.getElementById('logoutBtn').textContent = t('logoutBtn');
            
            // Êõ¥Êñ∞ÊâÄÊúâÊ®ôÁ±§
            for (let i = 1; i <= 7; i++) {
                const el = document.getElementById('label' + i);
                if (el) el.textContent = t('label' + i);
            }
            for (let i = 1; i <= 5; i++) {
                const el = document.getElementById('unit' + i);
                if (el) el.textContent = t('unit' + i);
            }
            for (let i = 1; i <= 5; i++) {
                const el = document.getElementById('footer' + i);
                if (el) el.textContent = t('footer' + i);
            }
            
            document.getElementById('chartTitle').textContent = t('chartTitle');
            document.getElementById('paramTitle').textContent = t('paramTitle');
            document.getElementById('temp').textContent = t('temp');
            document.getElementById('pressure').textContent = t('pressure');
            document.getElementById('oxygen').textContent = t('oxygen');
            document.getElementById('recordsTitle').textContent = t('recordsTitle');
            
            for (let i = 1; i <= 7; i++) {
                const el = document.getElementById('th' + i);
                if (el) el.textContent = t('th' + i);
            }
        }

        // ÁôªÂÖ•ËôïÁêÜ
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const id = document.getElementById('employeeId').value.toUpperCase();
            
            if (EMPLOYEE_DATABASE[id]) {
                currentUser = { id, ...EMPLOYEE_DATABASE[id] };
                currentLanguage = currentUser.language;
                updateLanguage();
                
                document.getElementById('welcomeMessage').textContent = 
                    t('welcome') + ', ' + currentUser.name + ' (' + id + ')';
                
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainDashboard').classList.remove('hidden');
                
                initChart();
            } else {
                document.getElementById('loginError').classList.add('show');
            }
        });

        // ÁôªÂá∫
        function logout() {
            currentUser = null;
            currentLanguage = 'zh';
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainDashboard').classList.add('hidden');
            document.getElementById('employeeId').value = '';
            document.getElementById('loginError').classList.remove('show');
            updateLanguage();
        }

        // ÂàùÂßãÂåñÂúñË°®
        function initChart() {
            const ctx = document.getElementById('trendChart').getContext('2d');
            
            if (chartInstance) {
                chartInstance.destroy();
            }

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                    datasets: [
                        {
                            label: t('label1'),
                            data: [4800, 4750, 4680, 4620, 4570, 4540, 4523],
                            borderColor: '#05bfdb',
                            backgroundColor: 'rgba(5, 191, 219, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: t('label2'),
                            data: [0, 1500, 3400, 5200, 6800, 7900, 8550],
                            borderColor: '#088395',
                            backgroundColor: 'rgba(8, 131, 149, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e8eaed',
                                font: { size: 12 }
                            }
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#9ca3af' }
                        },
                        x: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#9ca3af' }
                        }
                    }
                }
            });
        }

        // ÂàùÂßãÂåñ
        updateLanguage();

        // PWA Service Worker Ë®ªÂÜä
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('‚úÖ Service Worker Ë®ªÂÜäÊàêÂäü:', registration.scope);
                    })
                    .catch(error => {
                        console.log('‚ùå Service Worker Ë®ªÂÜäÂ§±Êïó:', error);
                    });
            });
        }

        // PWA ÂÆâË£ùÊèêÁ§∫
        let deferredPrompt;
        const installButton = document.createElement('button');
        installButton.textContent = 'üì± ÂÆâË£ù APP';
        installButton.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #05bfdb, #088395);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(5,191,219,0.4);
            z-index: 1000;
            display: none;
            animation: bounce 2s infinite;
        `;

        // Ê∑ªÂä†ÂΩàË∑≥ÂãïÁï´
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
        `;
        document.head.appendChild(style);
        document.body.appendChild(installButton);

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
        });

        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`Áî®Êà∂ÈÅ∏Êìá: ${outcome}`);
                deferredPrompt = null;
                installButton.style.display = 'none';
            }
        });

        // Â∑≤ÂÆâË£ùÂæåÈö±ËóèÊåâÈàï
        window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA Â∑≤ÂÆâË£ù!');
            installButton.style.display = 'none';
        });
    </script>
</body>
</html>
